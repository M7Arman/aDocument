(function(y,q){"function"===typeof define&&define.amd?define(q):y.form2js=q()})(this,function(){function y(a,k,g,h){var e=v(a,k,g,h);return 0<e.length?e:q(a,k,g,h)}function q(a,k,g,h){var e=[];for(a=a.firstChild;a;)e=e.concat(v(a,k,g,h)),a=a.nextSibling;return e}function v(a,k,g,h){if(a.disabled&&!h)return[];var e,f;f=a.name&&""!=a.name?a.name:g&&a.id&&""!=a.id?a.id:"";(e=k&&k(a))&&e.name?f=[e]:""!=f&&a.nodeName.match(/INPUT|TEXTAREA/i)?(a=B(a,h),f=null===a?[]:[{name:f,value:a}]):""!=f&&a.nodeName.match(/SELECT/i)?
	(a=B(a,h),f=[{name:f.replace(/\[\]$/,""),value:a}]):f=q(a,k,g,h);return f}function B(a,k){if(a.disabled&&!k)return null;switch(a.nodeName){case "INPUT":case "TEXTAREA":switch(a.type.toLowerCase()){case "radio":if(a.checked&&"false"===a.value)return!1;case "checkbox":if(a.checked&&"true"===a.value)return!0;if(!a.checked&&"true"===a.value)return!1;if(a.checked)return a.value;break;case "button":case "reset":case "submit":case "image":return"";default:return a.value}break;case "SELECT":var g;g=[];var h,
	e,f;if(a.multiple)for(h=a.getElementsByTagName("option"),e=0,f=h.length;e<f;e++)h[e].selected&&g.push(h[e].value);else g=a.value;return g}return null}return function(a,k,g,h,e,f){f=f?!0:!1;if("undefined"==typeof g||null==g)g=!0;if("undefined"==typeof k||null==k)k=".";5>arguments.length&&(e=!1);a="string"==typeof a?document.getElementById(a):a;var u=[],q,z=0;if(a.constructor==Array||"undefined"!=typeof NodeList&&a.constructor==NodeList)for(;q=a[z++];)u=u.concat(y(q,h,e,f));else u=y(a,h,e,f);q=g;var z=
	k,v={},r={},w,l,b,x,t,n,d,m,p,c,A;for(w=0;w<u.length;w++)if(t=u[w].value,!q||""!==t&&null!==t){l=u[w].name;A=l.split(z);n=[];d=v;m="";for(l=0;l<A.length;l++)if(c=A[l].split("]["),1<c.length)for(b=0;b<c.length;b++)if(c[b]=0==b?c[b]+"]":b==c.length-1?"["+c[b]:"["+c[b]+"]",p=c[b].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(x=1;x<p.length;x++)p[x]&&n.push(p[x]);else n.push(c[b]);else n=n.concat(c);for(l=0;l<n.length;l++)c=n[l],-1<c.indexOf("[]")&&l==n.length-1?(b=c.substr(0,c.indexOf("[")),m+=b,d[b]||
(d[b]=[]),d[b].push(t)):-1<c.indexOf("[")?(b=c.substr(0,c.indexOf("[")),p=c.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),m+="_"+b+"_"+p,r[m]||(r[m]={}),""==b||d[b]||(d[b]=[]),l==n.length-1?""==b?(d.push(t),r[m][p]=d[d.length-1]):(d[b].push(t),r[m][p]=d[b][d[b].length-1]):r[m][p]||(/^[0-9a-z_]+\[?/i.test(n[l+1])?d[b].push({}):d[b].push([]),r[m][p]=d[b][d[b].length-1]),d=r[m][p]):(m+=c,l<n.length-1?(d[c]||(d[c]={}),d=d[c]):d[c]=t)}return v}});